{
  "groups": [
    {
      "id": "baseline_options",
      "title": "Baseline Options",
      "description": "",
      "helpText": "",
      "collapsible": true,
      "triggersRun": true,
      "preRun": true,
      "subGroups": [
        {
          "id": "site_inputs",
          "title": "Site Inputs",
          "description": "",
          "helpText": "",
          "fields": [
            {
              "id": "population",
              "label": "Size of population at risk",
              "helpText": "Enter the size of the population in the region.",
              "type": "number",
              "required": true,
              "default": 20000,
              "min": 0,
              "max": 1000000000,
              "step": 100,
              "integer": true
            },
            {
              "id": "is_seasonal",
              "label": "Is transmission seasonal?",
              "helpText": "Seasonal: a region with a transmission season. If toggle is off we assume transmission is perennial: a region with year-round transmission.",
              "type": "toggle",
              "required": true,
              "default": false
            },
            {
              "id": "current_malaria_prevalence",
              "label": "Current malaria prevalence",
              "helpText": "Define the current endemicity of your setting as measured by the prevalence of children 6-month to 59-months of age who are diagnosed with falciparum malaria by microscopy. The prevalence estimate should relate to the mean value from the previous year.",
              "required": true,
              "default": 2,
              "type": "slider",
              "min": 2,
              "max": 70,
              "step": 1,
              "unit": "%",
              "integer": true
            }
          ]
        },
        {
          "id": "mosquito_inputs",
          "title": "Mosquito Inputs",
          "description": "",
          "helpText": "Values chosen should represent the average mosquito transmitting malaria throughout the year. If multiple vectors are present then the characteristics should be weighted towards the dominant vector species.",
          "fields": [
            {
              "id": "preference_for_biting_in_bed",
              "label": "Preference for biting in bed",
              "helpText": "An estimate of the % of bites that are taken in bed (default suggestion: 82%).",
              "type": "slider",
              "required": true,
              "default": 82,
              "min": 40,
              "max": 90,
              "step": 1,
              "unit": "%",
              "integer": true
            },
            {
              "id": "preference_for_biting",
              "label": "Preference for biting humans",
              "helpText": "An estimate of the % of bites that are taken on humans (default suggestion: 87%).",
              "type": "slider",
              "required": true,
              "default": 87,
              "min": 60,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            },
            {
              "id": "pyrethroid_resistance",
              "label": "Level of pyrethroid resistance",
              "helpText": "Mosquito survival in 24-hour WHO discriminatory dose bioassays. 0% indicates all mosquitoes die and are susceptible to the pyrethroid insecticide in ITNs. 100% indicates that no mosquitoes die or are susceptible to the pyrethroid insecticide in ITNs.",
              "type": "slider",
              "required": true,
              "default": 0,
              "min": 0,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            }
          ]
        },
        {
          "id": "past_vector_control",
          "title": "Past Vector Control",
          "description": "",
          "helpText": "The current endemicity of a region is partly determined by the performance and quantity of vector control leading up to now. This is required to approximate the efficacy of interventions moving forward. ",
          "collapsible": false,
          "fields": [
            {
              "id": "py_only",
              "label": "Pyrethroid-only ITN population usage ",
              "helpText": "Enter estimates of the levels of pyrethroid-only ITN use (%) achieved immediately after the last mass campaign. Note that the total usage across all types of ITN cannot exceed 100%.",
              "type": "slider",
              "required": true,
              "default": 0,
              "min": 0,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            },
            {
              "id": "py_pbo",
              "label": "Pyrethroid-PBO ITN population usage",
              "helpText": "Enter estimates of the levels of pyrethroid-PBO ITN use (%) achieved immediately after the last mass campaign. Note that the total usage across all types of ITN cannot exceed 100%. ",
              "type": "slider",
              "required": true,
              "default": 0,
              "min": 0,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            },
            {
              "id": "py_pyrrole",
              "label": "Pyrethroid-pyrrole ITN population usage",
              "helpText": "Enter estimates of the levels of pyrethroid-pyrrole ITN use (%) achieved immediately after the last mass campaign. Note that the total usage across all types of ITN cannot exceed 100%.",
              "type": "slider",
              "required": true,
              "default": 0,
              "min": 0,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            },
            {
              "id": "py_ppf",
              "label": "Pyrethroid-pyriproxyfen ITN population usage",
              "helpText": "Enter estimates of the levels of pyrethroid-pyriproxyfen ITN use (%) achieved immediately after the last mass campaign. Note that the total usage across all types of ITN cannot exceed 100%.",
              "type": "slider",
              "required": true,
              "default": 0,
              "min": 0,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            },
            {
              "id": "itn_total",
              "label": "Total ITN population usage",
              "type": "display",
              "unit": "%",
              "value": {
                "type": "cross_field",
                "fields": ["py_only", "py_pbo", "py_pyrrole", "py_ppf"],
                "operator": "sum"
              }
            },
            {
              "id": "irs_coverage",
              "label": "IRS population coverage",
              "helpText": "Enter the percentage of sleeping structures sprayed in the year of the last survey in this region.",
              "type": "slider",
              "required": true,
              "default": 0,
              "min": 0,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            }
          ]
        }
      ]
    },
    {
      "id": "intervention_options",
      "title": "Intervention Options",
      "triggersRun": true,
      "collapsible": true,
      "preRun": false,
      "description": "Enter the details of the planned intervention options for this region.",
      "helpText": "",
      "subGroups": [
        {
          "id": "future_intervention",
          "title": "Future Intervention Options",
          "helpText": "",
          "description": "",
          "collapsible": false,
          "fields": [
            {
              "id": "itn_future",
              "label": "Expected ITN population usage",
              "helpText": "Enter the anticipated level of ITN use (%) that will be achieved immediately after the planned mass campaign. Only one type of ITN is implemented at a time.",
              "type": "slider",
              "required": true,
              "default": 0,
              "min": 0,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            },
            {
              "id": "itn_future_types",
              "label": "Future ITN types",
              "helpText": "Select the type of ITN that will be distributed in the planned mass campaign. Note these options are only enabled when “Expected ITN population usage” is above 0%.",
              "type": "multiselect",
              "disabled": {
                "type": "cross_field",
                "fields": ["itn_future"],
                "operator": "falsy"
              },
              "options": [
                { "label": "Pyrethroid-only ITNs", "value": "py_only" },
                { "label": "Pyrethroid-PBO ITNs", "value": "py_pbo" },
                { "label": "Pyrethroid-pyrrole ITNs", "value": "py_pyrrole" },
                { "label": "Pyrethroid-pyriproxyfen ITNs", "value": "py_ppf" }
              ]
            },
            {
              "id": "routine_coverage",
              "label": "Continuous distribution of ITNs",
              "helpText": "Select whether continuous distribution of ITNs is planned in addition to the mass campaign. Note this option is only enabled when “Expected ITN population usage” is above 0%.",
              "type": "toggle",
              "required": true,
              "disabled": {
                "type": "cross_field",
                "fields": ["itn_future"],
                "operator": "falsy"
              },
              "default": false
            },
            {
              "id": "irs_future",
              "label": "Expected IRS coverage",
              "helpText": "Enter the anticipated percentage of the population living in houses that will be sprayed during the planned IRS campaign.",
              "type": "slider",
              "required": true,
              "default": 0,
              "min": 0,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            },
            {
              "id": "lsm",
              "label": "Expected reduction in mosquito density achieved through larval source management",
              "helpText": "Enter the anticipated reduction in mosquito density (%) that will be achieved through the planned LSM campaign.",
              "type": "slider",
              "required": true,
              "default": 0,
              "min": 0,
              "max": 90,
              "step": 1,
              "unit": "%",
              "integer": true
            }
          ]
        }
      ]
    },
    {
      "id": "cost_options",
      "title": "Cost Options",
      "description": "",
      "helpText": "",
      "triggersRun": false,
      "collapsible": true,
      "preRun": false,
      "subGroups": [
        {
          "id": "procurement_distribution",
          "title": "Procurement and Distribution Options",
          "description": "The delivery of nets and sprays is conducted differently in each country. Enter the procurement assumptions for the planned intervention options for this region.",
          "helpText": "",
          "collapsible": true,
          "fields": [
            {
              "id": "people_per_bednet",
              "label": "People per ITN",
              "helpText": "When planning ITN procurement, what number of people per ITN is used?",
              "type": "number",
              "required": true,
              "default": 1.8,
              "step": 0.1
            },
            {
              "id": "people_per_household",
              "label": "Average people per household",
              "helpText": "When planning IRS procurement, what average number of people per household is used?",
              "type": "number",
              "required": true,
              "default": 4,
              "step": 1
            },
            {
              "id": "procurement_buffer",
              "label": "Procurement buffer",
              "helpText": "When nets are procured, there is a buffer to ensure there is not a shortfall. Please indicate your estimate here. This is used to adjust cost estimates.",
              "type": "slider",
              "required": true,
              "default": 7,
              "min": 0,
              "max": 100,
              "step": 1,
              "unit": "%",
              "integer": true
            }
          ]
        },
        {
          "id": "intervention_prices",
          "title": "Price of Interventions",
          "description": "Specify the product and implementation costs for different intervention options.",
          "helpText": "",
          "collapsible": true,
          "fields": [
            {
              "id": "py_only_cost",
              "label": "Price of pyrethroid-only ITNs ($USD)",
              "type": "number",
              "required": true,
              "default": 1.85,
              "step": 0.01
            },
            {
              "id": "py_pbo_cost",
              "label": "Price of pyrethroid-PBO ITNs ($USD)",
              "type": "number",
              "required": true,
              "default": 2.14,
              "step": 0.01
            },
            {
              "id": "py_pyrrole_cost",
              "label": "Price of pyrethroid-pyrrole ITNs ($USD)",
              "type": "number",
              "required": true,
              "default": 2.56,
              "step": 0.01
            },
            {
              "id": "py_ppf_cost",
              "label": "Price of pyrethroid-pyriproxyfen ITNs ($USD)",
              "type": "number",
              "required": true,
              "default": 2.86,
              "step": 0.01
            },
            {
              "id": "mass_distribution_cost",
              "label": "ITN mass distribution campaign: delivery cost per ITN ($USD)",
              "helpText": "Enter the estimated cost to deliver each ITN that is distributed through the mass campaign.",
              "type": "number",
              "required": true,
              "default": 2.75,
              "step": 0.01
            },
            {
              "id": "continuous_itn_distribution_cost",
              "label": "ITN continuous distribution campaign: delivery cost per ITN ($USD)",
              "helpText": "Enter the estimated cost to deliver each ITN that is distributed through continuous channels.",
              "type": "number",
              "required": true,
              "default": 2.75,
              "step": 0.01
            },
            {
              "id": "irs_household_annual_cost_product",
              "label": "Estimated annual cost of IRS product per household structure ($USD)",
              "helpText": "This is the cost of the IRS products needed to spray an average sized household structure (as defined by the user in the Procurement and Distribution Options section above).",
              "type": "number",
              "required": true,
              "default": 12
            },
            {
              "id": "irs_household_annual_cost_deployment",
              "label": "Estimated annual cost of IRS deployment per household structure ($USD)",
              "helpText": "This is the logistics costs involved with spraying an average sized household structure (as defined by the user in the Procurement and Distribution Options section above).",
              "type": "number",
              "required": true,
              "default": 12
            },
            {
              "id": "lsm_cost",
              "label": "Estimated cost of LSM programme per person ($USD)",
              "helpText": "This is the estimated total cost to conduct an LSM programme that will achieve the reduction in mosquito density defined in the Intervention Options section above, divided by the population size for this region.",
              "type": "number",
              "required": true,
              "default": 10
            }
          ]
        }
      ]
    }
  ],
  "customValidationRules": {
    "itn_total_under_100": {
      "type": "cross_field",
      "fields": ["py_only", "py_pbo", "py_pyrrole", "py_ppf"],
      "operator": "sum_lte",
      "threshold": 100,
      "errorFields": ["itn_total"],
      "message": "Total ITN population usage must be less than or equal to 100%."
    }
  }
}
